version: "0.2"

providers:
  local_ollama:
    type: "ollama"
    base_url: "http://localhost:11434"
    default_model: "gemma3:latest"

agents:
  coordinator:
    provider: "local_ollama"
    model: "gemma3:latest"
    prompt:
      system: "You coordinate work across specialist agents and keep the plan consistent."
  researcher:
    provider: "local_ollama"
    model: "gemma3:latest"
    prompt:
      system: "You gather concise, relevant research notes for the coordinator."
  analyst:
    provider: "local_ollama"
    model: "gemma3:latest"
    prompt:
      system: "You analyze risks, assumptions, and success criteria."
  writer:
    provider: "local_ollama"
    model: "gemma3:latest"
    prompt:
      system: "You produce clear, structured written artifacts."

tasks:
  make_brief:
    prompt:
      user: |
        Create a concise project brief with:
        - goal
        - audience
        - constraints
        - desired outcome

        Topic:
        {{topic}}
  research_notes:
    prompt:
      user: |
        Produce 5-7 bullet research notes relevant to the brief.

        Brief:
        {{brief}}
  analysis:
    prompt:
      user: |
        Identify key risks, assumptions, and success criteria.

        Brief:
        {{brief}}

        Research notes:
        {{research_notes}}
  draft_plan:
    prompt:
      user: |
        Draft a one-page plan with sections:
        - Overview
        - Plan
        - Risks
        - Next steps

        Brief:
        {{brief}}

        Research notes:
        {{research_notes}}

        Analysis:
        {{analysis}}
  final_review:
    prompt:
      user: |
        As coordinator, produce the final output:
        - 3-bullet summary
        - decisions made
        - open questions

        Draft plan:
        {{draft}}

        Analysis:
        {{analysis}}

run:
  name: "v0-2-coordinator-agents-sdk"
  workflow:
    kind: "sequential"
    steps:
      - id: "coordinator-brief"
        agent: "coordinator"
        task: "make_brief"
        inputs:
          topic: "Community health outreach plan for a small city."
        save_as: "brief"
      - id: "research-notes"
        agent: "researcher"
        task: "research_notes"
        inputs:
          brief: "Placeholder from step coordinator-brief (brief output)."
        save_as: "research_notes"
      - id: "analysis"
        agent: "analyst"
        task: "analysis"
        inputs:
          brief: "Placeholder from step coordinator-brief (brief output)."
          research_notes: "Placeholder from step research-notes (notes output)."
        save_as: "analysis"
      - id: "draft"
        agent: "writer"
        task: "draft_plan"
        inputs:
          brief: "Placeholder from step coordinator-brief (brief output)."
          research_notes: "Placeholder from step research-notes (notes output)."
          analysis: "Placeholder from step analysis (analysis output)."
        save_as: "draft"
      - id: "final"
        agent: "coordinator"
        task: "final_review"
        inputs:
          draft: "Placeholder from step draft (draft output)."
          analysis: "Placeholder from step analysis (analysis output)."
        save_as: "final_output"
